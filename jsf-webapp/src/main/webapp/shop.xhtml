<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml"
   xmlns:h = "http://java.sun.com/jsf/html"
   xmlns:f = "http://java.sun.com/jsf/core">
   
   <h:head>
      <title>Without header AJAX does not work</title>
   </h:head>
   
   <h:body>
      <h2>Ajax Example</h2>
      <h:form>
        <div>
            <h:outputText id="cart" value="Items in shoping cart: #{cartController.itemCount} "/>
        </div>
        <h:commandButton id="article-1" value="Add to cart: Pencil">
            <!-- Ajax listener takes a AjaxBehaviorEvent parameter, so we cannot
                pass parameters via f:param, but we can pass via f: attributes and
                retrive by:event.getComponent().getAttributes().get("ATTRIBUTE_NAME"); 
            -->
            <f:attribute id="articleParam" name="article" value="pencil"/>
            <f:attribute id="countParam" name="count" value="1"/>
            <!-- f:ajax attributes: 
                execute: space separated list of client components sent in the request
                render: client components rendered when ajax request is processed    
                listener: method called when an AjaxBehaviorEvent has been broadcast -->
            <f:ajax execute="article-1" render="cart" listener="#{cartController.addToCart}"/>
        </h:commandButton>
        <h:commandButton id="article-2" value="Add to cart: Paper">
            <f:attribute id="articleParam" name="article" value="paper"/>
            <f:attribute id="countParam" name="count" value="1"/>
            <f:ajax execute="article-2" render="cart" listener="#{cartController.addToCart}"/>
        </h:commandButton>
      </h:form>
      <h:link outcome="index.xhtml?faces-redirect=true" value="Home"/>
   </h:body>
</html>