<ui:composition template="layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.prime.com.tr/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html">

    <f:metadata>
        <f:viewParam name="page" value="#{customerController.page}" />
    </f:metadata>
    
    <ui:define name="title">City Setup</ui:define>

    <ui:define name="content">
        <div class="d-flex">
            <div class="p-2 mr-auto"><h2>Customers</h2></div>
            <div class="p-2">
                <h:link styleClass="btn btn-sm btn-success" outcome="create.xhtml">Create new customer</h:link
            ></div>
        </div>
        <!-- table of customers -->
        <h:dataTable id="customerTable" binding="#{table}" value="#{customerController.findAllCustomers()}" var="customer" class="table table-striped table-sm" >
            <h:column>
                <f:facet name="header">Index</f:facet>
                <h:outputText value="#{table.rowIndex + 1}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Title</f:facet>
                <h:outputText value="#{customer.title}"/>
            </h:column>
            <h:column>
                <f:facet name="header">First name</f:facet>
                <h:outputText value="#{customer.firstName}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Last name</f:facet>
                <h:outputText value="#{customer.lastName}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Email</f:facet>
                <h:outputText value="#{customer.email}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Birthdate</f:facet>
                <h:outputText value="#{customer.birthDate}"/>
            </h:column>
            <h:column>
                <!-- edit action --> 
                <f:facet name="header">Action</f:facet>
                <h:link styleClass="btn btn-sm btn-warning" outcome="edit.xhtml">
                    <f:param name="id" value="#{customer.id}" />
                    &#160; Edit &#160;
                </h:link>
                &#160;&#160;
                <!-- remove action -->
                <h:link styleClass="btn btn-sm btn-danger" outcome="remove.xhtml">
                    <f:param name="id" value="#{customer.id}" />
                    Remove
                </h:link>
                &#160;&#160;
                <!-- remove action -->
                <h:link styleClass="btn btn-sm btn-info" outcome="detail.xhtml">
                    <f:param name="id" value="#{customer.id}" />
                    Detail
                </h:link>
            </h:column>
        </h:dataTable>
        
        <div class="text-center"><!-- paging buttons --> 
            <h:link styleClass="btn btn-sm btn-info" outcome="index.xhtml">
                &#124;&#60;  <!--first-->
                <f:param name="page" value="1" />
            </h:link>
            &#160;
            <h:link styleClass="btn btn-sm btn-info" outcome="index.xhtml">
                &#60; <!--previous-->
                <!-- <f:param name="page" value="#{customerController.page-1}" /> -->
                <f:param name="page" value="#{customerController.page > 1 ? customerController.page - 1 : 1}" />
            </h:link>
            &#160;
            <h:outputText value="#{customerController.page}"></h:outputText>
            &#160;     
            <h:link styleClass="btn btn-sm btn-info" outcome="index.xhtml">
                &#62; <!--next-->
                <f:param name="page" value="#{customerController.page+1}" />
            </h:link> 
            &#160;       
            <h:link styleClass="btn btn-sm btn-info" outcome="index.xhtml">
                &#62;&#124;  <!--last-->
                <f:param name="page" value="-1" />
            </h:link>
        </div>
    </ui:define>
</ui:composition>